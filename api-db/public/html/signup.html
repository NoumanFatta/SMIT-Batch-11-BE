<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>signup</title>
     <link rel="stylesheet" href="../stylesheets/style.css">
</head>

<body>
     <div class="container">
          <h1>Sign Up</h1>
          <form id="register">
               <!-- <input type="text" name="username" placeholder="Username" required> -->
               <input type="email" id="register-email" placeholder="Email" required>
               <input type="password" id="register-password" placeholder="Password" required>
               <button type="submit">Sign Up</button>
          </form>
          <div class="link">
               <span id="register-message"></span>
               Already have an account? <a href="/login">Login</a>
          </div>
     </div>

     <script>
          document.addEventListener("DOMContentLoaded", () => {
               // Register Form
               const registerForm = document.getElementById("register");
               registerForm.addEventListener("submit", (e) => {
                    e.preventDefault();

                    const email = document.getElementById("register-email").value;
                    const password = document.getElementById("register-password").value;

                    // Send POST request to backend
                    fetch("/api/auth/register", {
                         method: "POST",
                         headers: {
                              "Content-Type": "application/json",
                         },
                         body: JSON.stringify({ email, password }),
                    })
                         .then((response) => response.json())
                         .then((data) => {
                              location.replace("/login")
                              // document.getElementById("register-message").innerText = `registerd but you have to login must`;
                         })
                         .catch((error) => {
                              // document.getElementById("register-message").innerText =
                              // "Error: " + error.message;
                              alert('something is wrong')
                         });
               });

          });
     </script>
</body>

</html>